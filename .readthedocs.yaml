# Read the Docs configuration file
# See https://docs.readthedocs.io/en/stable/config-file/v2.html for details

# Required
version: 2

# Set the OS, Python version, and other tools you might need
build:
  os: ubuntu-24.04
  tools:
    python: "3.13"
  commands:
    - |
      curl -s -o /dev/null -w "%{http_code}" \
      -H "Authorization: Bearer $DELTAKIT_TOKEN" \
      -k https://deltakit.riverlane.com/proxy/api/health/ | grep -q 200 && echo "Token valid"
    - pip install uv
    - uv sync --resolution highest --group docs
    - uv run --no-sync sphinx-build -W -T -b html -d _build/doctrees -D language=en docs $READTHEDOCS_OUTPUT/html
